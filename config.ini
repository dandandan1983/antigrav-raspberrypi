[bluetooth]
# Device name visible to phones
device_name = RPi Hands-Free
# Bluetooth device class (0x200404 = Hands-Free audio device)
device_class = 0x200404
# Make device discoverable
discoverable = true
# Auto-reconnect to last known device
auto_reconnect = true
# Pairing PIN code
pin_code = 0000
# Enable A2DP profile for high-quality music streaming
# Note: A2DP and HFP are mutually exclusive during use
# When A2DP is enabled, device can receive music
# During calls, profile switches to HFP automatically
enable_a2dp = false

# Reconnection settings
reconnect_attempts = 5
reconnect_delay = 2.0
reconnect_max_delay = 30.0

[audio]
# Sample rate for voice calls (8000 or 16000 Hz)
sample_rate = 16000
# Mono audio
channels = 1
# Audio format (S16_LE = signed 16-bit little-endian)
format = S16_LE
# Audio buffer size in frames (lower = less latency, higher = more stable)
# 512 @ 16kHz = 32ms latency (recommended for low latency)
# 1024 @ 16kHz = 64ms latency (balanced)
buffer_size = 1024
# SCO (Synchronous Connection-Oriented) for voice
sco_mtu = 48

# Audio Device Selection
# Use 'default' for system default, or specify PulseAudio source/sink names
# Run 'pactl list sources short' and 'pactl list sinks short' to find names
capture_device = default
playback_device = default

# Echo Cancellation Settings
# Tail length in ms (100-300ms typical for room acoustics)
aec_tail_length = 200

# Audio Quality Enhancements
# Enable Wide-Band Speech (mSBC codec, 16kHz)
enable_wideband = true
# Enable audio preprocessing pipeline
enable_preprocessing = true
# Noise reduction level (0=off, 1=low, 2=medium, 3=high)
noise_reduction_level = 2
# Enable echo cancellation
enable_aec = true
# Enable automatic gain control
enable_agc = true
# AGC target level in dB (-20 to 0)
agc_target_level = -6
# Enable high-pass filter to remove rumble
enable_highpass = true
# High-pass filter cutoff frequency in Hz
highpass_cutoff = 80
# Enable quality monitoring and logging
enable_quality_monitoring = true

[gpio]
# Button GPIO pins (BCM numbering)
button_answer = 17
button_reject = 27
button_vol_up = 22
button_vol_down = 23

# LED GPIO pins
led_status = 24
led_call = 25

# Button debounce time (milliseconds)
debounce_time = 200

[misc]
# Logging level: DEBUG, INFO, WARNING, ERROR, CRITICAL
log_level = INFO
# Log file path
log_file = /var/log/rpi-handsfree.log
# Enable console logging
log_to_console = true
